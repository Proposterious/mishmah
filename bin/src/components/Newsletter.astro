---
import { Image } from "astro:assets";

---

<article id="register-newsletter-container" class="hidden h-full w-full bg-slate-900/60 dark:bg-slate-600 fixed z-10">
    <card id="register-newsletter-card" class="bg-gradient-to-tr from-amber-600 to-slate-100 dark:from-blue-900 dark:to-slate-900/60 p-8 dark:text-slate-100 text-slate-900 w-1/2 h-3/4 fixed top-[16%] left-1/4">
        <h1 class="text-center text-4xl font-semibold">Sign Up for Newsletter</h1>
        <h2 class="text-center mt-2 text-lg">Receive an email whenever the author publishes a new book!</h2>

        <section id="register-newsletter-content" class="flex flex-col justify-center">
            <div id="register-newsletter-content-author" class="flex flex-row w-1/2 mx-auto border-2 border-amber-600 dark:border-blue-400 border-double mt-6 p-2">
                <Image src="/author/author_multicolored_dreams.jpg" alt="Elwood G Edwards"
                width={140} height={140} class="object-contain" />
                
                <div id="register-newsletter-content-author-text" class="m-auto text-center text-2xl font-bold">
                    <h3>Thank You!</h3>
                </div>
            </div>

            <div id="register-newsletter-content-register">
                <form id="register-newsletter" class="popup-newsletter w-full mt-6 flex flex-col justify-center">
                    <div id="email-zone" class="flex flex-col w-1/2 mx-auto">
                        <label for="mishmah-email" class="font-semibold text-sm md:text-lg xl:text-xl">Your Email Address: </label>
                        <input type="email" class="w-fit indent-2 placeholder:text-sm placeholder:md:text-base placeholder:xl:text-lg text-sm md:text-base xl:text-lg dark:border-blue-400 border-amber-600 border-2 focus:border-inherit p-0.5" id="mishmah-email" size="32" placeholder="email@address.com" />
                    </div>

                    <div id="checklist-zone" class="mt-4 flex flex-col space-y-2 text-center">
                       
                        <label for="mishmah-novels" class="text-xs">
                            <input id="mishmah-novels" type="checkbox" class="" />
                            I would like to be notified once the author releases a new novel.
                        </label>

                        <label for="mishmah-blogs" class="text-xs ml-8">
                            <input id="mishmah-blogs" type="checkbox" class="" />
                            I would like to be notified once the author publishes a new blog post.
                        </label>
                    </div>

                    <div id="mambaUI-submit" class="text-sm lg:text-base mt-4 marker:flex mx-auto justify-center space-x-4">
                        <button type="reset" class="px-4 py-2 border rounded-md border-amber-600 dark:border-blue-400 transition duration-150 hover:font-semibold hover:bg-slate-100">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 border rounded-md bg-amber-600 dark:bg-blue-400 text-slate-100 dark:text-gray-900 border-amber-600 dark:border-blue-400 transition duration-150 hover:font-semibold">
                            Receive Emails
                        </button>
                    </div>
                </form> 

            </div>
        </section>
        
    </card>
</article>

<script>
    const newsletterButtons = Array.from(document.getElementsByClassName("popup-newsletter")) as Array<HTMLElement>

    newsletterButtons.forEach((button: HTMLElement) => { 
        button.addEventListener("click", () => {
            const newsletterStatus = document.getElementById("register-newsletter-container") as HTMLElement
            if (newsletterStatus.classList.contains("hidden")) { // hide registration
                newsletterStatus.classList.remove("hidden")
            } else { // display registration
                newsletterStatus.classList.add("hidden") 
            }
            console.log("newsletterStatus", newsletterStatus.style.display)
        })
    })
</script>